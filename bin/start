#!/usr/bin/env sh

set -o errexit  # always exit on error
set -o pipefail # don't ignore exit codes when piping output
# set -x          # enable debugging

IFS="$(printf "\n\t")"

cd "$(dirname "$0")/.."
yarn install
yarn build
printf "Creating hydra clientâ€¦"
./bin/wait-for.sh "${OAUTH2_HOST}:${OAUTH2_ADMIN_PORT}"
./bin/create-hydra-client.js

# Enable this in line production. Uncomment it before you commit and push your codes to codecommit
yarn start

# Enable this line in local development. Comment it before you commit and push your codes to codecommit
#yarn start:dev
